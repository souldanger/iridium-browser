From 9c3abcb3b938e410df517b9779c6088ea6664f2a Mon Sep 17 00:00:00 2001
From: Joachim Bauch <jojo@struktur.de>
Date: Mon, 6 Jul 2015 17:17:20 +0200
Subject: [PATCH 53/58] search: show blank tab for new tab page

Avoid loading the search page everytime, just show a blank one instead.

References: https://github.com/iridium-browser/iridium-browser/issues/32
---
 chrome/browser/search/search.cc | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/chrome/browser/search/search.cc b/chrome/browser/search/search.cc
index 4355aef..902910d 100644
--- a/chrome/browser/search/search.cc
+++ b/chrome/browser/search/search.cc
@@ -257,6 +257,7 @@ bool IsURLAllowedForSupervisedUser(const GURL& url, Profile* profile) {
   return true;
 }
 
+#if 0
 // Returns whether |new_tab_url| can be used as a URL for the New Tab page.
 // NEW_TAB_URL_VALID means a valid URL; other enum values imply an invalid URL.
 NewTabURLState IsValidNewTabURL(Profile* profile, const GURL& new_tab_url) {
@@ -270,6 +271,7 @@ NewTabURLState IsValidNewTabURL(Profile* profile, const GURL& new_tab_url) {
     return NEW_TAB_URL_BLOCKED;
   return NEW_TAB_URL_VALID;
 }
+#endif
 
 // Used to look up the URL to use for the New Tab page. Also tracks how we
 // arrived at that URL so it can be logged with UMA.
@@ -278,6 +280,9 @@ struct NewTabURLDetails {
       : url(url), state(state) {}
 
   static NewTabURLDetails ForProfile(Profile* profile) {
+#if 1
+    return NewTabURLDetails(GURL("about:blank"), NEW_TAB_URL_VALID);
+#else
     const GURL local_url(chrome::kChromeSearchLocalNtpUrl);
     TemplateURL* template_url = GetDefaultSearchProviderTemplateURL(profile);
     if (!profile || !template_url)
@@ -298,6 +303,7 @@ struct NewTabURLDetails {
         // Use the local New Tab otherwise.
         return NewTabURLDetails(local_url, state);
     }
+#endif
   }
 
   GURL url;
-- 
2.4.3

